{"id":"IT-07f","title":"Add code coverage reporting","description":"**Current state:** No code coverage reporting configured. No coverage badge. No minimum coverage requirements.\n\n**Changes needed:**\n\n1. **Add to package.json:**\n```json\n{\n  \"scripts\": {\n    \"test:coverage\": \"vitest run --coverage\"\n  },\n  \"devDependencies\": {\n    \"@vitest/coverage-v8\": \"^3.2.4\"\n  }\n}\n```\n\n2. **Add to vite.config.ts:**\n```typescript\ntest: {\n  coverage: {\n    reporter: ['text', 'html', 'lcov'],\n    thresholds: {\n      lines: 80,\n      functions: 80,\n      branches: 75,\n      statements: 80,\n    },\n  },\n}\n```\n\n3. **Add coverage badge to README**\n\nTarget: 80% coverage for hooks and services.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T16:38:54.015438879Z","updated_at":"2025-12-16T16:38:54.015438879Z","labels":["ci","testing"]}
{"id":"IT-2qt","title":"Fix MockAudioContext missing state property in test setup","description":"**File:** src/test/setup.ts lines 7-32\n\nThe MockAudioContext is missing the state property and resume() method, which are critical for iOS audio unlock functionality. Code testing audio state transitions will fail or behave unexpectedly.\n\n**Fix:** Add missing properties:\n```typescript\nclass MockAudioContext {\n  state: AudioContextState = \"running\";\n  \n  resume() {\n    this.state = \"running\";\n    return Promise.resolve();\n  }\n  \n  suspend() {\n    this.state = \"suspended\";\n    return Promise.resolve();\n  }\n  // ... existing methods\n}\n```","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T16:36:57.573250366Z","updated_at":"2025-12-16T16:45:20.941119277Z","closed_at":"2025-12-16T16:45:20.941119277Z","labels":["audio","testing"]}
{"id":"IT-4pb","title":"Fix AudioService statechange listener not re-attached after context recreation","description":"**File:** src/services/audioService.ts lines 272-284\n\nThe comment states \"Must be re-attached for each new context instance,\" but setupStateChangeListener() is only called from setupListeners() which only runs once (listenersAttached flag prevents re-run).\n\nWhen destroyContext() is called and a new context is created via getContext(), the statechange listener won't be attached to the new context.\n\n**Fix:** Call setupStateChangeListener() in getContext() after creating a new context.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T16:36:57.225147277Z","updated_at":"2025-12-16T16:41:54.336334334Z","closed_at":"2025-12-16T16:41:54.336334334Z","labels":["audio","ios"]}
{"id":"IT-57p","title":"Add input validation to SettingsModal","description":"**File:** src/components/SettingsModal.tsx lines 64, 76, 88, 100, 112\n\nWhile min and max HTML attributes are set, Number(e.target.value) can produce NaN for empty input or invalid text. There's no validation to ensure valid numbers are passed to onSave.\n\n**Fix:** Add validation before setting state:\n```typescript\nonChange={(e) =\u003e {\n  const val = parseInt(e.target.value, 10);\n  if (!isNaN(val)) {\n    setWorkTime(Math.max(1, Math.min(600, val)));\n  }\n}}\n```","status":"open","priority":3,"issue_type":"bug","created_at":"2025-12-16T16:37:43.527072191Z","updated_at":"2025-12-16T16:37:43.527072191Z","labels":["validation"]}
{"id":"IT-7yj","title":"Implement centralized state management","description":"**Current state:** App state is local to src/App.tsx (lines 30-44), leading to prop drilling through 5+ levels. Multiple useState calls make state hard to track.\n\n**Impact:** Hard to add features, error-prone state updates, difficult testing.\n\n**Options:**\n\n**Option A: Context-based state (minimal change)**\n```typescript\n// src/contexts/TimerContext.tsx\ninterface TimerContextState {\n  mode: Mode;\n  profile: TimerProfile;\n  activePreset: string;\n  timerState: TimerState;\n  actions: { setMode, setProfile, selectPreset, toggleTimer, resetTimer };\n}\n```\n\n**Option B: Zustand (recommended for growth)**\n```typescript\n// src/stores/timerStore.ts\nimport create from 'zustand';\ninterface TimerStore { ... }\n```\n\n**Benefits:**\n- Eliminates prop drilling\n- Easier to test (store can be mocked)\n- Better DevTools integration\n- Easier to add features (workout history, analytics)","status":"open","priority":1,"issue_type":"feature","created_at":"2025-12-16T16:38:53.111734047Z","updated_at":"2025-12-16T16:38:53.111734047Z","labels":["architecture","state-management"]}
{"id":"IT-81q","title":"Add IndexedDB schema migrations to setsStorage","description":"**File:** src/services/setsStorage.ts\n\n**Problem:** No migration strategy exists. If schema changes, old user data will break.\n\n**Current approach:** Uses hardcoded DB_VERSION = 1 with no onupgradeneeded handler for migrations.\n\n**Fix:** Implement version-based migrations:\n```typescript\nfunction openDB(): Promise\u003cIDBDatabase\u003e {\n  return new Promise((resolve, reject) =\u003e {\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n    \n    request.onupgradeneeded = (event) =\u003e {\n      const db = (event.target as IDBOpenDBRequest).result;\n      const oldVersion = event.oldVersion;\n      \n      if (oldVersion \u003c 1) {\n        db.createObjectStore(STORE_NAME);\n      }\n      if (oldVersion \u003c 2) {\n        // Future migrations here\n      }\n    };\n    // ...\n  });\n}\n```\n\nConsider using idb library for cleaner migrations.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-16T16:38:54.920680724Z","updated_at":"2025-12-16T16:38:54.920680724Z","labels":["data-migration","storage"]}
{"id":"IT-9jt","title":"Remove or merge unused githubService.ts","description":"**File:** src/services/githubService.ts\n\nThis service is not actually used - BugReporter from @idvorkin/pwa-utils handles GitHub integration. The build info is duplicated in pwaDebugServices.ts (lines 43-50).\n\n**Options:**\n1. Delete githubService.ts entirely (preferred - it's dead code)\n2. Merge useful functions into pwaDebugServices.ts if any are needed\n\nPer project conventions: \"Deleting unused code/files is allowed without approval (preserved in git history)\"","status":"open","priority":3,"issue_type":"chore","created_at":"2025-12-16T16:38:54.311052105Z","updated_at":"2025-12-16T16:38:54.311052105Z","labels":["cleanup"]}
{"id":"IT-a0y","title":"Add error logging to setsStorage operations","description":"**File:** src/services/setsStorage.ts lines 54-56, 75-77, 90-92\n\nAll error handling silently swallows exceptions with empty catch blocks:\n```typescript\n} catch {\n    return 0; // No logging\n}\n```\n\nThis contradicts the project's emphasis on debugging (session recording, bug reporting). When storage fails, there's no way to diagnose the issue.\n\n**Fix:** Log errors to the session recorder like audioService.ts does.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-16T16:37:43.33012178Z","updated_at":"2025-12-16T16:37:43.33012178Z","labels":["debugging","error-handling"]}
{"id":"IT-a3t","title":"Fix update-banner E2E tests testing fake DOM instead of real component","description":"**File:** e2e-tests/update-banner.spec.ts lines 22-63\n\nThe tests inject fake DOM elements instead of testing the actual UpdateBanner component. This provides zero confidence that the real component works correctly.\n\nThese tests will pass even if the actual UpdateBanner component is completely broken.\n\n**Fix options:**\n1. Mock the service worker registration to simulate an update being available\n2. Export a way to programmatically trigger the update banner state\n3. Remove these tests rather than have tests that provide false confidence","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-16T16:36:57.32986876Z","updated_at":"2025-12-16T16:36:57.32986876Z","labels":["e2e","testing"]}
{"id":"IT-dkm","title":"Add Escape key handling to modals","description":"Modals lack keyboard accessibility - no focus trapping and no Escape key handler for closing.\n\n**Affected files:**\n- SettingsModal.tsx\n- AppSettingsModal.tsx  \n- BugReportDialog.tsx\n\nUsers navigating with keyboard can tab outside the modal or get stuck.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T16:36:56.539775726Z","updated_at":"2025-12-16T16:43:38.969379459Z","closed_at":"2025-12-16T16:43:38.969379459Z","labels":["a11y","accessibility"]}
{"id":"IT-edh","title":"Add E2E tests for timer runtime behavior","description":"**File:** e2e-tests/timer.spec.ts\n\nCurrent timer tests only cover static/idle states. Missing tests for:\n- Starting the timer and verifying countdown behavior\n- Timer completion and transition to REST phase\n- STOP button functionality during active timer\n- Round increment after work+rest cycle\n- Timer state persistence after page refresh\n\nExample:\n```typescript\ntest('should start countdown when clicking START', async ({ page }) =\u003e {\n  await page.click('text=START');\n  await expect(page.locator('text=WORK')).toBeVisible();\n  await page.waitForTimeout(1500);\n  await expect(page.locator('text=00:29')).toBeVisible();\n});\n```","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T16:37:43.204216341Z","updated_at":"2025-12-16T16:37:43.204216341Z","labels":["e2e","testing"]}
{"id":"IT-ffk","title":"Fix hardcoded preset ID assumption in App.tsx","description":"**File:** src/App.tsx lines 31, 35\n\nUsing a non-null assertion (!) assumes \"30sec\" preset always exists in PRESETS. If someone modifies PRESETS and removes that ID, this causes a runtime error.\n\n```typescript\nconst [activePreset, setActivePreset] = useState(\"30sec\");\n// ...\nconst preset = PRESETS.find((p) =\u003e p.id === \"30sec\")!;\n```\n\n**Fix:** Use the first preset as default, or add a fallback:\n```typescript\nconst [activePreset, setActivePreset] = useState(PRESETS[0].id);\n// ...\nconst preset = PRESETS.find((p) =\u003e p.id === PRESETS[0].id) ?? PRESETS[0];\n```","status":"open","priority":3,"issue_type":"bug","created_at":"2025-12-16T16:38:55.172189806Z","updated_at":"2025-12-16T16:38:55.172189806Z","labels":["type-safety"]}
{"id":"IT-foe","title":"Create reusable Modal component","description":"**Problem:** Duplicate modal patterns across:\n- AppSettingsModal.tsx lines 25-29\n- BugReportDialog.tsx line 37\n- SettingsModal.tsx\n\nEach implements overlay click handlers and escape key handling separately (or not at all).\n\n**Fix:** Create a shared Modal component or hook:\n```typescript\n// src/components/common/Modal.tsx\nexport function Modal({ isOpen, onClose, children }) {\n  const handleOverlayClick = (e) =\u003e {\n    if (e.target === e.currentTarget) onClose();\n  };\n  \n  useEffect(() =\u003e {\n    const handleEscape = (e) =\u003e e.key === 'Escape' \u0026\u0026 onClose();\n    document.addEventListener('keydown', handleEscape);\n    return () =\u003e document.removeEventListener('keydown', handleEscape);\n  }, [onClose]);\n  \n  if (!isOpen) return null;\n  \n  return (\n    \u003cdiv className={styles.overlay} onClick={handleOverlayClick}\u003e\n      \u003cdiv className={styles.content}\u003e{children}\u003c/div\u003e\n    \u003c/div\u003e\n  );\n}\n```\n\nThis would also fix IT-dkm (Escape key handling) for all modals at once.","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-16T16:38:53.518122432Z","updated_at":"2025-12-16T16:38:53.518122432Z","labels":["architecture","components"]}
{"id":"IT-j6o","title":"Add unit tests for useSets hook","description":"**File:** src/hooks/useSets.ts\n\nNo unit tests exist for the sets hook. Missing coverage for:\n- increment/decrement/reset functionality\n- IndexedDB persistence\n- Max count enforcement\n- Loading state handling\n\nNeeds fake-indexeddb for storage mocking.","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T16:37:43.134735882Z","updated_at":"2025-12-16T16:37:43.134735882Z","labels":["testing"]}
{"id":"IT-jk5","title":"Add aria-label to close buttons on modals","description":"**Affected files:**\n- SettingsModal.tsx line 53-55\n- AppSettingsModal.tsx line 48-50\n\nClose buttons use \u0026times; character without an aria-label, making them inaccessible.\n\n```tsx\n\u003cbutton className={styles.modalClose} onClick={onClose}\u003e\n  \u0026times;\n\u003c/button\u003e\n```\n\n**Fix:** Add aria-label:\n```tsx\n\u003cbutton className={styles.modalClose} onClick={onClose} aria-label=\"Close\"\u003e\n  \u0026times;\n\u003c/button\u003e\n```","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T16:38:55.340762313Z","updated_at":"2025-12-16T16:43:39.065985203Z","closed_at":"2025-12-16T16:43:39.065985203Z","labels":["a11y","accessibility"]}
{"id":"IT-kmb","title":"Fix device sleep on iOS - implement NoSleep workaround","description":"GitHub issue #19: Device falls asleep during timer on iOS Safari.\n\nRoot cause: The Screen Wake Lock API (`navigator.wakeLock`) is not supported on iOS Safari. The current useWakeLock hook silently fails on iOS.\n\nSolution: Implement the NoSleep.js approach - play a tiny silent video in a loop to prevent iOS from sleeping. This is the standard workaround for iOS PWAs.","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-19T17:24:36.048681898Z","updated_at":"2025-12-19T17:26:06.752443433Z","closed_at":"2025-12-19T17:26:06.752443433Z"}
{"id":"IT-kzh","title":"Fix potential memory leak from timeout in AppSettingsModal","description":"**File:** src/components/AppSettingsModal.tsx line 102\n\nThe setTimeout at line 102 does not store its reference for cleanup. If the component unmounts before the timeout fires, it will still execute and potentially cause a state update on an unmounted component.\n\n```typescript\nsetTimeout(() =\u003e setAudioTestStatus(\"idle\"), 2000);\n```\n\n**Fix:** Use a ref to track the timeout and clear it on unmount:\n```typescript\nconst timeoutRef = useRef\u003cnumber\u003e();\n\nuseEffect(() =\u003e {\n  return () =\u003e {\n    if (timeoutRef.current) {\n      clearTimeout(timeoutRef.current);\n    }\n  };\n}, []);\n\n// Then in onClick:\ntimeoutRef.current = window.setTimeout(() =\u003e setAudioTestStatus(\"idle\"), 2000);\n```","status":"open","priority":3,"issue_type":"bug","created_at":"2025-12-16T16:37:43.462842482Z","updated_at":"2025-12-16T16:37:43.462842482Z","labels":["memory-leak"]}
{"id":"IT-l02","title":"Fix AudioService event listeners never being removed","description":"**File:** src/services/audioService.ts lines 250-268\n\nThe setupListeners() method attaches event listeners to document.body and document but never removes them. In development with HMR, this accumulates duplicate listeners on each reload.\n\n**Fix:** Store listener references and provide a dispose() method, or use { once: true } where appropriate.","status":"open","priority":2,"issue_type":"bug","created_at":"2025-12-16T16:36:57.108033697Z","updated_at":"2025-12-16T16:36:57.108033697Z","labels":["audio","memory-leak"]}
{"id":"IT-l9w","title":"Add null check for root element in main.tsx","description":"**File:** src/main.tsx line 7\n\nUsing the non-null assertion operator (!) on getElementById(\"root\") assumes the element always exists. If the element is missing from the HTML, this will throw a runtime error.\n\n**Fix:**\n```typescript\nconst rootElement = document.getElementById(\"root\");\nif (!rootElement) {\n  throw new Error(\"Root element not found\");\n}\ncreateRoot(rootElement).render(...)\n```","status":"open","priority":3,"issue_type":"bug","created_at":"2025-12-16T16:36:57.441275462Z","updated_at":"2025-12-16T16:36:57.441275462Z","labels":["type-safety"]}
{"id":"IT-np5","title":"Add unit tests for setsStorage.ts","description":"**File:** src/services/setsStorage.ts\n\nPer CLAUDE.md: \"Tests \u003e Code - Users should never find bugs tests could have caught\"\n\nThere are NO tests for setsStorage.ts. This module handles persistent data storage with untested paths:\n- loadSetsCount() catching openDB errors\n- saveSetsCount() silently failing  \n- clearSetsCount() silently failing\n- Auto-reset after 30 minutes inactivity\n\nUse fake-indexeddb for testing:\n```typescript\nimport 'fake-indexeddb/auto';\n\ndescribe('setsStorage', () =\u003e {\n  it('should auto-expire after 30 minutes', async () =\u003e { ... });\n  it('should return 0 on error', async () =\u003e { ... });\n});\n```","status":"open","priority":1,"issue_type":"task","created_at":"2025-12-16T16:37:43.000530253Z","updated_at":"2025-12-16T16:37:43.000530253Z","labels":["testing"]}
{"id":"IT-p7i","title":"Fix IDBDatabase connection leak in setsStorage","description":"**File:** src/services/setsStorage.ts lines 29-53, 61-77, 83-92\n\nEvery operation calls openDB() but the returned IDBDatabase connection is never closed. IndexedDB connections are limited resources.\n\nOver time, especially with many operations, this can exhaust IndexedDB connection limits in some browsers.\n\n**Fix:** Close the database connection after the transaction completes:\n```typescript\ntransaction.oncomplete = () =\u003e db.close();\n```","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T16:36:56.985116697Z","updated_at":"2025-12-16T16:41:54.375708515Z","closed_at":"2025-12-16T16:41:54.375708515Z","labels":["memory-leak","storage"]}
{"id":"IT-pna","title":"Add unit tests for useStopwatch hook","description":"**File:** src/hooks/useStopwatch.ts\n\nNo unit tests exist for the stopwatch hook. Missing coverage for:\n- Start/pause/reset functionality\n- Lap recording\n- Millisecond formatting\n- State transitions\n\nExample:\n```typescript\ndescribe('useStopwatch', () =\u003e {\n  it('should record lap times', () =\u003e { ... });\n  it('should format milliseconds correctly', () =\u003e { ... });\n  it('should reset all state', () =\u003e { ... });\n});\n```","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T16:37:43.069825668Z","updated_at":"2025-12-16T16:37:43.069825668Z","labels":["testing"]}
{"id":"IT-qf8","title":"Add aria-labels to interactive elements (Stopwatch, Sets)","description":"Missing accessible names on interactive elements make the app inaccessible to screen readers.\n\n**Stopwatch.tsx line 39:** Play/stop button lacks aria-label\n**Sets.tsx lines 130-139:** Tappable div with role=button lacks aria-label and aria-disabled\n\nFix: Add aria-label that changes based on state (e.g., \"Stop\" vs \"Start\")","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T16:36:56.269252283Z","updated_at":"2025-12-16T16:43:39.123851398Z","closed_at":"2025-12-16T16:43:39.123851398Z","labels":["a11y","accessibility"]}
{"id":"IT-s28","title":"Refactor App.tsx - extract mode components","description":"**File:** src/App.tsx (169 lines)\n\nApp.tsx is too large and mixes orchestration with business logic. Contains formatTime function, profile management, and keyboard shortcuts.\n\n**Proposed split:**\n```\nApp.tsx (orchestration only)\n├── TimerMode.tsx (lines 109-139)\n├── StopwatchMode.tsx (lines 141-145)\n└── SetsMode.tsx (lines 147-152)\n```\n\nEach mode component would be self-contained with its own hooks and state.\n\nAlso move:\n- PRESETS array to src/config/presets.ts\n- formatTime to src/utils/formatTime.ts","status":"open","priority":2,"issue_type":"task","created_at":"2025-12-16T16:38:53.31333435Z","updated_at":"2025-12-16T16:38:53.31333435Z","labels":["architecture","refactor"]}
{"id":"IT-s73","title":"Fix useWakeLock race condition and event listener accumulation","description":"**File:** src/hooks/useWakeLock.ts lines 12-18\n\nTwo issues:\n1. **Race condition:** If requestWakeLock is called multiple times rapidly (e.g., rapid tab switching), multiple wake lock requests can be in flight simultaneously. The ref will only hold the last one, potentially leaking previous WakeLockSentinel objects.\n\n2. **Event listener accumulation:** An event listener is added to wakeLockRef.current inside requestWakeLock, but it is never removed.\n\n**Fix:**\n```typescript\nconst requestWakeLock = useCallback(async () =\u003e {\n    if (wakeLockRef.current) {\n        await wakeLockRef.current.release();\n        wakeLockRef.current = null;\n    }\n    // ... then request new lock\n```","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T16:37:43.395172704Z","updated_at":"2025-12-16T16:45:20.54581593Z","closed_at":"2025-12-16T16:45:20.54581593Z","labels":["hooks","memory-leak"]}
{"id":"IT-sbu","title":"Add user feedback for bug report submission failure","description":"**File:** src/components/BugReportDialog.tsx lines 20-28\n\nThe handleSubmit function catches the error but only logs it. There's no user feedback when submission fails.\n\n```typescript\nconst handleSubmit = async () =\u003e {\n  try {\n    await submitBugReport(title.trim() || \"Bug Report\", description.trim());\n    setTitle(\"\");\n    setDescription(\"\");\n  } catch (error) {\n    console.error(\"Failed to submit bug report:\", error);\n    // User has no idea submission failed\n  }\n};\n```\n\n**Fix:** Add error state and display error message to user.","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T16:37:43.59960509Z","updated_at":"2025-12-16T16:45:20.343274594Z","closed_at":"2025-12-16T16:45:20.343274594Z","labels":["error-handling","ux"]}
{"id":"IT-u3y","title":"Associate form labels with inputs in SettingsModal","description":"**File:** src/components/SettingsModal.tsx lines 59-116\n\nThe label elements are not properly associated with their input elements (no htmlFor/id pairing). This is an accessibility issue.\n\n**Fix:** Add id to inputs and htmlFor to labels:\n```tsx\n\u003clabel className={styles.settingLabel} htmlFor=\"workTime\"\u003eWORK TIME\u003c/label\u003e\n\u003cinput id=\"workTime\" type=\"number\" ... /\u003e\n```","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T16:36:57.651807561Z","updated_at":"2025-12-16T16:43:39.162109067Z","closed_at":"2025-12-16T16:43:39.162109067Z","labels":["a11y","accessibility"]}
{"id":"IT-u9u","title":"Add CSS safe-area-inset for iOS notch/home indicator","description":"**Impact:** Minor visual issue on iOS - content may be obscured by notch or home indicator.\n\n**Fix:** Add to src/index.css:\n```css\n#root {\n  padding-bottom: env(safe-area-inset-bottom);\n  padding-top: env(safe-area-inset-top);\n  padding-left: env(safe-area-inset-left);\n  padding-right: env(safe-area-inset-right);\n}\n```\n\nOr selectively apply to specific components like BottomNav.","status":"open","priority":3,"issue_type":"task","created_at":"2025-12-16T16:38:54.635916011Z","updated_at":"2025-12-16T16:38:54.635916011Z","labels":["css","ios"]}
{"id":"IT-vjy","title":"Fix stale closure bug in useStopwatch pause function","description":"**File:** src/hooks/useStopwatch.ts lines 38-42\n\nThe pause function captures state.elapsedMs in its closure via the dependency array. This creates a stale closure problem where pausing could save an outdated elapsed time.\n\nThe interval updates elapsedRef.current directly, so on pause you should read from the ref, not state.\n\n**Fix:**\n```typescript\nconst pause = useCallback(() =\u003e {\n    clearTimer();\n    // elapsedRef.current is already up-to-date from the interval\n    setState((prev) =\u003e ({ ...prev, isRunning: false, elapsedMs: elapsedRef.current }));\n}, [clearTimer]);\n```","status":"closed","priority":1,"issue_type":"bug","created_at":"2025-12-16T16:36:56.822455346Z","updated_at":"2025-12-16T16:41:54.293644919Z","closed_at":"2025-12-16T16:41:54.293644919Z","labels":["critical","hooks"]}
{"id":"IT-ym2","title":"Add PWA offline fallback page and indicator","description":"**Current state:** No offline fallback page - if network fails, user sees browser default. No visual feedback when offline.\n\n**Fixes needed:**\n\n1. **Offline fallback in vite.config.ts:**\n```typescript\nworkbox: {\n  navigateFallback: '/index.html',\n  navigateFallbackDenylist: [/^\\/api/],\n}\n```\n\n2. **Offline indicator hook:**\n```typescript\n// src/hooks/useOnlineStatus.ts\nexport function useOnlineStatus() {\n  const [isOnline, setIsOnline] = useState(navigator.onLine);\n  \n  useEffect(() =\u003e {\n    const handleOnline = () =\u003e setIsOnline(true);\n    const handleOffline = () =\u003e setIsOnline(false);\n    \n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n    return () =\u003e { /* cleanup */ };\n  }, []);\n  \n  return isOnline;\n}\n```\n\n3. **Visual indicator component:**\n```tsx\n\u003cOfflineBanner isOnline={isOnline} /\u003e\n```","status":"open","priority":2,"issue_type":"feature","created_at":"2025-12-16T16:38:53.763824545Z","updated_at":"2025-12-16T16:38:53.763824545Z","labels":["pwa","ux"]}
{"id":"IT-zzb","title":"Add error handling to useSets async operations","description":"**File:** src/hooks/useSets.ts lines 16-27\n\nMissing error handling for async storage operations:\n\nloadSetsCount() has no .catch() handler - if storage fails, isLoaded will never become true:\n```typescript\nuseEffect(() =\u003e {\n    loadSetsCount().then((savedCount) =\u003e {\n        setCount(Math.min(savedCount, maxCount));\n        setIsLoaded(true);\n    });\n    // Missing .catch() handler\n}, [maxCount]);\n```\n\nsaveSetsCount() is fire-and-forget with no error handling.\n\n**Fix:**\n```typescript\nloadSetsCount()\n    .then((savedCount) =\u003e setCount(Math.min(savedCount, maxCount)))\n    .catch((err) =\u003e console.error(\"Failed to load sets count:\", err))\n    .finally(() =\u003e setIsLoaded(true));\n```","status":"closed","priority":2,"issue_type":"bug","created_at":"2025-12-16T16:37:43.270510441Z","updated_at":"2025-12-16T16:45:20.778293869Z","closed_at":"2025-12-16T16:45:20.778293869Z","labels":["error-handling"]}
